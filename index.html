<!DOCTYPE html>
<html>
  <head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Data</title>
  <link rel="stylesheet" href="sch.css" type="text/css" media="all" />
  <script src="sch.js">sch.js</script>
  </style>
    
  </style>
  <style>
  h3{
  position :absolute;
  top:-20px;
  color: red;
  background: linear-gradient(45deg, #41ff64,#428ff4);
  width: 400px;
  height: 35px;
  filter :blur(1px);
  
  }

 #unchecked-list{
text-align:left;
color:white;
}
#done-percent {
text-align:right;
background-color:#4f46e5;
border-radius:20%;
}
  </style>
  </head>
  <body id="body">
 <h3>School Data</h3>
      </div>
  <div class="menu-icon" onclick="toggleMenu()">
    <div></div>
    <div></div>
    <div></div>
   
  </div>
 
  
  <div class="nav" id="navMenu">
    
    <a onclick="rightheader()">Update Completion</a>
    <a onclick="window.location.href='Data Entrynotebook.html'">Update Notebook</a>
    <a onclick="window.location.href='Hwinput.html'">Update HomeWork </a>
    <a onclick="window.location.href='Tetsinput.html'">Update Test</a>
    <a onclick="window.location.href='InCopycheck.html'">Update Copy check</a>
<a onclick="window.location.href='Fetch.html'">LocalStorage</a>
    
    
  </div>
  
  <script>
    function toggleMenu() {
      const nav = document.getElementById("navMenu");
      nav.style.display = nav.style.display === "block" ? "none" : "block";
    }
  </script>
  <div class="header" >
  
  <div id="workdone"></div>
 <b> <div id="date"></div></b> 

    <div id="target" onclick="">
<ul id="unchecked-list"></ul>
<div id="done-percent"></div>

<script>
  function getHomeworkToday() {
    const homework = JSON.parse(localStorage.getItem("homework") || "[]");
    const today = new Date().toISOString().slice(0, 10);
    return homework.filter(item => item.date === today);
  }

  function saveHomework(data) {
    localStorage.setItem("homework", JSON.stringify(data));
  }

  function isExpired(dateStr) {
    const created = new Date(dateStr + "T00:00:00");
    const now = new Date();
    const diffHrs = (now - created) / (1000 * 60 * 60); // milliseconds â†’ hours
    return diffHrs >= 10; // 10 hours cross hone ke baad expire
  }

  function renderUncheckedToday() {
    const list = document.getElementById("unchecked-list");
    const donePercentElem = document.getElementById("done-percent");

    const allHomework = JSON.parse(localStorage.getItem("homework") || "[]");
    const homeworkToday = getHomeworkToday();

    const expired = homeworkToday.length > 0 && isExpired(homeworkToday[0].date);

    list.innerHTML = '';

    homeworkToday.forEach((item, idx) => {
      const li = document.createElement('li');

      const checkbox = document.createElement('input');
      checkbox.type = 'checkbox';
      checkbox.checked = item.done || false;
      checkbox.disabled = expired; // agar expire ho gaya to disable

      checkbox.addEventListener('change', () => {
        item.done = checkbox.checked;
        const indexInAll = allHomework.findIndex(h => h.date === item.date && h.subject === item.subject);
        if (indexInAll !== -1) {
          allHomework[indexInAll].done = item.done;
          saveHomework(allHomework);
        }
        renderUncheckedToday();
      });

      li.appendChild(checkbox);
      li.append(" " + item.subject + (item.notes ? ': ' + item.notes : ''));
      list.appendChild(li);
    });

    // Percent calc sirf expire hone ke baad bhi wahi count karega jo ticked hai
    const totalFixed = 6;
    const doneCount = homeworkToday.filter(item => item.done).length;
    const percentDone = ((doneCount) * 100 / totalFixed).toFixed(1);

    donePercentElem.textContent = `Completed: ${percentDone}%`;
  }

  renderUncheckedToday();
</script>
  </div>
  <!-- note book complete work -->
  <div id="ncw" onclick="">
     <!--english work complete-->
<div id="enwc">}|[\[\{\{</div>
<!--hindi work complete-->
<div id="hiwc">}|[|[|}{|</div>
<!--sst work complete-->
<div id="mtywc">]\{\{|[}<] </div>
<!--mathsY work complete-->
<div id="scwc">]\{~}|]<}</div>
<!--science work complete-->
<div id="sstwc">{|[\{|}\[</div> 
<!-- mathsB work complete-->
<div id="mtbwc">[<[\{\[|}<</div>
    <!--ncwp -notebook complete work percentage-->
    <b> <div id="ncwp">[]}[[]</div></b>
  </div>
  </div>
  <div class="container">
    <!--hindi work -->
  <div id="hw" onclick="hwshow()">ðŸ“ƒ</div>
  <!-- note book data -->
  <div id="nd" onclick="nbshow()">ðŸ“š</div>
  <!-- test available -->
  <div id="tst" onclick="window.location.href='Testview.html'">ðŸ—ž</div>
  <!-- copy check infuture -->  <div id="cc" onclick="window.location.href='DashboardCopy.html'">ðŸ“–</div>
<script>

  function Time(){
  const now = new Date();
console.log(now.toLocaleString());
  let hour = now.getHours();
  let minute = now.getMinutes();
  let second =   now.getSeconds();
  
  let seconds = second < 10 ? '0'+second:second;
  let hours = hour < 10 ? '0'+hour:hour;
  let hoursf = hours > 12 ? hours - 12:hours;
  let minutes = minute < 10 ? '0'+minute:minute;
  let ampm = hour > 12 ? 'PM':'AM'
document.getElementById('date').innerHTML = 'last update:'+ hoursf+':'+minutes+':'+seconds+' '+ampm;
  
  
  }
  setInterval(Time,10);
  
function ncw(){
var enwc = document.getElementById('enwc');
var hiwc = document.getElementById('hiwc');
var mtywc = document.getElementById('mtywc');
var scwc = document.getElementById('scwc');
var sstwc = document.getElementById('sstwc');
var mtbwc = document.getElementById('mtbwc');
var ncwp = document.getElementById('ncwp');
var sstw = localStorage.getItem('%sst');
var mtbw = localStorage.getItem("%mtb");
var enw = localStorage.getItem("%en");
var mtyw = localStorage.getItem("%mty");
var scw = localStorage.getItem("%sc");
var hiw = localStorage.getItem("%hi");
var com_per = localStorage.getItem("com_per");
let sstf = parseFloat(sstw);
let hif = parseFloat(hiw);
let scf = parseFloat(scw);
let enf = parseFloat(enw);
let mtyf = parseFloat(mtyw);
let mtbf = parseFloat(mtbw);


hiwc.innerHTML =  'Hindi'+' '+hiw+'%';
enwc.innerHTML = 'English'+' '+enw+'%';
sstwc.innerHTML = 'Sst'+' '+sstw+'%';
mtywc.innerHTML = 'MathsY'+' '+mtyw+'%';
scwc.innerHTML = 'Science'+' '+scw+'%';
mtbwc.innerHTML = 'MathsB'+' '+mtbw+'%';

let sumf = (sstf+scf+hif+enf+mtbf+mtyf)/6
let sum = sumf.toFixed(1);


ncwp.innerHTML = sum+'%'+' '+'Done'
  }
setInterval(ncw,1000);

function rightheader(){
  window.location.href="Notebook.html"
  
}
function hwshow(){
  window.location.href="Homework.html"
}
function nbshow() {
  window.location.href = "notebookDataset.html"
  }
    
  </script>


  </body>
</html>
