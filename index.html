<!DOCTYPE html>
<html>
  <head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Data</title>
  <link rel="stylesheet" href="sch.css" type="text/css" media="all" />
  <script src="sch.js">sch.js</script>
  </style>
    
  </style>
  <style>
  h3{
  position :absolute;
  top:-20px;
  color: red;
  background: linear-gradient(45deg, #41ff64,#428ff4);
  width: 400px;
  height: 35px;
  filter :blur(1px);
  
  }
  </style>
  </head>
  <body>
 <h3>School Data</h3>
      </div>
  <div class="menu-icon" onclick="toggleMenu()">
    <div></div>
    <div></div>
    <div></div>
   
  </div>
 
  
  <div class="nav" id="navMenu">
    <a onclick="window.location.href='Targets.html'">Update Targets</a>
    <a onclick="rightheader()">Update Completion</a>
    <a onclick="window.location.href='Data Entrynotebook.html'">Update Notebook</a>
    <a onclick="window.location.href='Hwinput.html'">Update HomeWork </a>
    <a onclick="window.location.href='Tetsinput.html'">Update Test</a>
    <a onclick="window.location.href='InCopycheck.html'">Update Copy check</a>
    
    
  </div>
  
  <script>
    function toggleMenu() {
      const nav = document.getElementById("navMenu");
      nav.style.display = nav.style.display === "block" ? "none" : "block";
    }
  </script>
  <div class="header" >
  
  <div id="workdone"></div>
 <b> <div id="date"></div></b> 

  <div id="target" onclick="">
  <span id="f"></span> <br>
  <span id="s"></span> <br>
  <span id="t"></span> <br>
  <span id="u"></span> <br>
  <span id="v"></span>  <br>
  <span id="w"></span>

  </div>
  <!-- note book complete work -->
  <div id="ncw" onclick="">
     <!--english work complete-->
<div id="enwc">}|[\[\{\{</div>
<!--hindi work complete-->
<div id="hiwc">}|[|[|}{|</div>
<!--sst work complete-->
<div id="mtywc">]\{\{|[}<] </div>
<!--mathsY work complete-->
<div id="scwc">]\{~}|]<}</div>
<!--science work complete-->
<div id="sstwc">{|[\{|}\[</div> 
<!-- mathsB work complete-->
<div id="mtbwc">[<[\{\[|}<</div>
    <!--ncwp -notebook complete work percentage-->
    <b> <div id="ncwp">[]}[[]</div></b>
  </div>
  </div>
  <div class="container">
    <!--hindi work -->
  <div id="hw" onclick="hwshow()">ðŸ“ƒ</div>
  <!-- note book data -->
  <div id="nd" onclick="nbshow()">ðŸ“š</div>
  <!-- test available -->
  <div id="tst" onclick="window.location.href='Testview.html'">ðŸ—ž</div>
  <!-- copy check infuture -->  <div id="cc" onclick="window.location.href='DashboardCopy.html'">ðŸ“–</div>
  
  <script type="module">
  // âœ… Import Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

  // âœ… Firebase Config
  const firebaseConfig = {
    apiKey: "AIzaSyC3veCIGvvGB-Gm4l1-1QiaKarfKRqgYwk",
    authDomain: "school-87740.firebaseapp.com",
    databaseURL: "https://school-87740-default-rtdb.firebaseio.com",
    projectId: "school-87740",
    storageBucket: "school-87740.appspot.com",
    messagingSenderId: "995471048405",
    appId: "1:995471048405:web:6d40e2eb61fdc6f5066c5c",
    measurementId: "G-05TEK2FRM6"
  };

  // âœ… Init Firebase
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  // âœ… Your existing functions
  function Time() {
    const now = new Date();
    let hour = now.getHours();
    let minute = now.getMinutes();
    let second = now.getSeconds();

    let seconds = second < 10 ? '0' + second : second;
    let hours = hour < 10 ? '0' + hour : hour;
    let hoursf = hours > 12 ? hours - 12 : hours;
    let minutes = minute < 10 ? '0' + minute : minute;
    let ampm = hour > 12 ? 'PM' : 'AM';
    document.getElementById('date').innerHTML = 'last update:' + hoursf + ':' + minutes + ':' + seconds + ' ' + ampm;
  }
  setInterval(Time, 1000);

  function Getdata() {
    var f = document.getElementById('f');
    var s = document.getElementById('s');
    var t = document.getElementById('t');
    var u = document.getElementById('u');
    var v = document.getElementById('v');
    var w = document.getElementById('w');
    var percent = document.getElementById('workdone');

    var sst = localStorage.getItem('SSt');
    var mtb = localStorage.getItem("MathsB");
    var en = localStorage.getItem("English");
    var mty = localStorage.getItem("MathsY");
    var sc = localStorage.getItem("Science");
    var hi = localStorage.getItem("Hindi");

    let a1 = parseFloat(en);
    let a2 = parseFloat(hi);
    let a3 = parseFloat(sst);
    let a4 = parseFloat(mty);
    let a5 = parseFloat(mtb);
    let a6 = parseFloat(sc);

    let sumg = (a1 + a2 + a3 + a4 + a5 + a6) / 6;
    let sum = sumg.toFixed(1);
    percent.innerHTML = sum + '% Finished';

    if (en) f.innerHTML = "English " + en + "%"; else f.innerHTML = '';
    if (sst) s.innerHTML = 'Sst ' + sst + "%"; else s.innerHTML = '';
    if (mty) t.innerHTML = "MathsY " + mty + "%"; else t.innerHTML = '';
    if (hi) u.innerHTML = "Hindi " + hi + "%"; else u.innerHTML = '';
    if (sc) v.innerHTML = "Science " + sc + "%"; else v.innerHTML = '';
    if (mtb) w.innerHTML = "MathsB " + mtb + "%"; else w.innerHTML = '';

    // âœ… Store in Firebase
    const userId = "student_" + new Date().getTime();
    set(ref(db, "progress/" + userId), {
      English: en,
      Hindi: hi,
      SSt: sst,
      MathsY: mty,
      MathsB: mtb,
      Science: sc,
      TotalPercent: sum
    });
  }
  setInterval(Getdata, 5000); // every 5 seconds send to Firebase

  function ncw() {
    var enwc = document.getElementById('enwc');
    var hiwc = document.getElementById('hiwc');
    var mtywc = document.getElementById('mtywc');
    var scwc = document.getElementById('scwc');
    var sstwc = document.getElementById('sstwc');
    var mtbwc = document.getElementById('mtbwc');
    var ncwp = document.getElementById('ncwp');

    var sstw = localStorage.getItem('%sst');
    var mtbw = localStorage.getItem("%mtb");
    var enw = localStorage.getItem("%en");
    var mtyw = localStorage.getItem("%mty");
    var scw = localStorage.getItem("%sc");
    var hiw = localStorage.getItem("%hi");

    let sstf = parseFloat(sstw);
    let hif = parseFloat(hiw);
    let scf = parseFloat(scw);
    let enf = parseFloat(enw);
    let mtyf = parseFloat(mtyw);
    let mtbf = parseFloat(mtbw);

    hiwc.innerHTML = 'Hindi ' + hiw + '%';
    enwc.innerHTML = 'English ' + enw + '%';
    sstwc.innerHTML = 'Sst ' + sstw + '%';
    mtywc.innerHTML = 'MathsY ' + mtyw + '%';
    scwc.innerHTML = 'Science ' + scw + '%';
    mtbwc.innerHTML = 'MathsB ' + mtbw + '%';

    let sumf = (sstf + scf + hif + enf + mtbf + mtyf) / 6;
    let sum = sumf.toFixed(1);

    ncwp.innerHTML = sum + '%' + ' ' + 'Done';

    // âœ… Also save this to Firebase
    const userId = "work_" + new Date().getTime();
    set(ref(db, "completed/" + userId), {
      English: enw,
      Hindi: hiw,
      SSt: sstw,
      MathsY: mtyw,
      MathsB: mtbw,
      Science: scw,
      TotalPercent: sum
    });
  }
  setInterval(ncw, 5000);

  function rightheader() { window.location.href = "Notebook.html"; }
  function hwshow() { window.location.href = "Homework.html"; }
  function nbshow() { window.location.href = "notebookDataset.html"; }
  </script>


  </body>
</html>
